Hands on: Sub Question Query Engine
====================================

 - Sub Question Query Engine in llamaIndex is a powerful tool for handling complex queries by breaking
   down to smaller more managable questions.
 - some of the best use case for the sub question query Engine is multi document analysis. when we need
   to analyze and compare information from multiple documents or different datasources.
  - for e.g comparing the financial report of different companies over different years.



in this e.g we see one financial report example.

Potential Use Case:
===================
  - complex research based questions. queries that requires gathering and synthesizing information
    from various sources to provide more comprehensive answer. we can use subquestion engine.
  - Another usecase is the cross domain inquiries , when a question span across multiple domains or different
    topics then this query engine can route subquestion to specialized knowledge bases or different tools.
  - Another usecase could be marketing research , we can analyze different trends across different secotr or
    different demographics by breaking down the broad market questions to subqueries.
  - Another usecase could be technical troubleshooting , where we can breakdown complex technical issues to
    smaller more specific problems that can be addressed systematically.




Step 1: setup:
==============

![image](https://github.com/user-attachments/assets/5812eb93-a593-461d-a4c6-89452d601c6b)

Step 2: load uber:
===================

![image](https://github.com/user-attachments/assets/e566cd0d-95b9-4228-a1ed-f7fc915f4078)

pdf total pages
lyft - 238 paes 
uber - 307 pages

pretty big financial documents.

Step 3: Build Indices:
========================

2 index 1 for uber , 1 for lyft.

![image](https://github.com/user-attachments/assets/da617251-0c04-4741-9839-9620d6df109b)

Step 3: Basic QA:
=================

1) 1 query engine for lyft
2) 2 query engine for uber

   - we can use the query Engines for firing the query and fetching the response.
   - below is the straight forward Q&A

   ![image](https://github.com/user-attachments/assets/e62c52af-06ae-46ed-8ed6-19a363a33b40)
   ![image](https://github.com/user-attachments/assets/23922a00-4ba7-48de-a1e2-d5d184537caa)

 
Step 4: comparing uber and lyft:
================================

  - 2 tools 1 for each of the query Engine (lyft) and another for uber.
  - in each tool provide the description of the metadata.
  - list of queryEngines 
  - wrap it up with subQuestionqueryEngine (final query engine)

  ![image](https://github.com/user-attachments/assets/e4f6202c-cb57-447d-8ba7-9209bb0e8bcb)

  ![image](https://github.com/user-attachments/assets/ea9fae1b-c05d-4676-ba6d-f516dd89968c)

  2*4 => 2 tools(lyft and uber) and four questions.

  - we got 4 individual responses which now be combined to generate the final comprehensive answer by llm.

    ![image](https://github.com/user-attachments/assets/fd571665-be60-4ddc-8e61-1ca591b75fb0)


  Another question in this case i want compare the revenue growth of uber and lyft from 2020 to 2021

    ![image](https://github.com/user-attachments/assets/5bda979e-6616-40b7-bd15-a12ff7badfa5)

  progress or growth of uber and lyft from 2020 to 2021

    ![image](https://github.com/user-attachments/assets/bf7c77ac-1ba7-46e4-8135-e833872e4c91)


   combining all the 4 answers
   ![image](https://github.com/user-attachments/assets/744fd841-c5ad-4798-ad0f-66e2e0aa0e6e)


   this kind of comparision and comprehensive analysis is possible using subquery Engine.
  
 
